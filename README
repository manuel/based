Requires libevent2 from SVN.  Tested on Debian stable/x86.

The quick rundown:

make
./based

In another shell:

curl -d "hello world" localhost:8080/hello-world
w3m http://localhost:8080/hello-world

You can PUT/POST files to arbitrary paths on the server,
e.g. /docs/john_doe/hello-world, and GET them back later, or DELETE
them.  GETting directories is also supported and returns a directory
listing (GET /foo/ <-- note trailing slash).  If your HTTP client
doesn't support the DELETE method you can fake it with a
"X-HTTP-Method-Override: DELETE" header.

The internal data structures consist of an append-only log, and a RAM
index which maps document IDs to offset/length pairs (struct
base_extent) in the log file.

An entry in the log (struct base_entry) consists of a head and a
content.  The head is made up of headers (struct base_header),
currently there is only one header that stores the ID.  Soon there
will be stuff like MIME type, checksum etc.

Network and file IO is completely synchronous, so page faults will
block the event loop.  With large RAMs and small documents maybe
that's not an issue.

Manuel Simoni (msimoni gmail com)
2008-05-05
